---
title: 파이썬으로 최대공약수 구하기(재귀 호출)
description: <center> Algorithm_with_python </center>
categories:
 - Algorithm
tags:
---

## 최대공약수

최대공약수는 두 개 이상의 정수의 공통 약수중에서 가장 큰 값을 의미합니다.

## 최대공약수 알고리즘

최대공약수의 성질을 떠올리면서 사람의 언어로 먼저 알고리즘을 풀어보겠습니다.
<br>

1. 두 수 중 더 작은 값을 변수(i)에 저장합니다 (변수: i로 설정하겠습니다.)
2. i가 두 수의 공통된 약수인지 확인합니다.
3. 공통된 약수이면 이 값을 결과값으로 돌려주고 종료합니다.
4. 공통된 약수가 아니면 i를 1만큼 감소시키고 2번으로 돌아가 반복합니다(1은 모든 정수의 약수이니 i가 1이 되면 1을 결과값으로 돌려주고 종료합니다.)

4와 6의 최대공약수를 찾는 과정을 예시로 설명해 보겠습니다.
<br>

1. i에 4를 저장합니다(4와 6중 작은 값인 4가 최대공약수 후보 중 가장 큰 값).
2. 4는 i로 나누어떨어지지만, 6은 나누어떨어지지 않습니다.
3. i를 1만큼 감소시켜 3으로 만듭니다.
4. 4는 i로 나누어 떨어지지 않습니다.
5. i를 1만큼 감소시켜 2로 만듭니다.
6. 4도 i로 나누어떨어지고 6도 i로 나누어떨어지므로 i값 2가 최대공약수입니다.

이제 위의 설명을 참고해서 파이썬으로 알고리즘을 만들어보겠습니다.

```python
# 최대 공약수 구하기
# 입력: a, b
# 출력: a와 b의 최대공약수

def gcb(a, b):
    i = min(a, b) # 두 수 중에서 최솟값을 구하는 파이썬 함수
    while True:
        if a % i == 0 and b % i == 0:
            return i
        i = i - 1 # i를 1만큼 감소시킴
        
print(gcb(1, 5))
print(gcb(3, 6))
print(gcb(60, 24))
print(gcb(81, 27))
```
실행 결과

```python
1
3
12
27
```

```python
a % i == 0에서 %는 나머지를 구하는 연산자입니다. a를 i로 나누었을 때 나머지가 0이면 a는 i로 나누어 떨어진다는 의미입니다.
```

## 유클리드 알고리즘
이번에는 유클리드가 발견한 최대공약수의 성질을 이용하는 다른 알고리즘을 살펴보겠습니다.
<br>

* a와 b의 최대공약수는 `b`와 `a를 b로 나눈 나머지`의 최대공약수와 같습니다. 즉, `gcb(a, b) = gcb(b, a % b)`입니다.
* 어떤 수와 0의 최대공약수는 자기 자신입니다. 즉, `gcb(n, 0) = n`입니다.

유클리드 방식을 보게되면 최대공약수를 구하기 위해서 재귀함수를 사용할 수 있습니다. 여기서 재귀 호출이 무한히 반복되지 않도록 하는 데 필요한 종료 조건은 `어떤 수와 0의 최대공약수는 자기자신`이라는 성질입니다. 즉, b가 0이면 재귀 호출을 멈추고 결과를 돌려줍니다. 이제 유클리드 알고리즘을 이용해 최대공약수를 구하는 프로그램을 만들어 보겠습니다.

```python
# 최대공약수 구하기
# 입력: a, b
# 출력: a와 b의 최대공약수

def gcd(a, b):
    if b == 0: # 종료 조건
        return a
    return gcb(b, a%b) # 좀 더 작은 값으로 자기 자신을 호출

print(gcb(1, 5))
print(gcb(3, 6))
print(gcb(60, 24))
print(gcb(81, 27))
```
실행 결과

```python
1
3
12
27
```

위처럼 단 세줄로 최대공약수를 구할 수 있는데 이것이 바로 재귀 호출의 강점입니다. 자기가 자기를 부르는 과정, 즉 꼬리에 꼬리를 무는 함수 호출은 처음에는 다소 복잡하고 이해하기 어렵지만, 한 번 익혀 두면 여러 가지 문제를 굉장히 단순하게 풀 수 있도록 하는 강력한 무기가 됩니다. 이제 위의 재귀함수가 호출되는 과정을 살펴보겠습니다.

```python
gcb(60, 24)
	-> gcb(24, 12)
			-> gcb(12, 0)
				->12(b가 0이므로 종료 조건)
			->12
	-> 12(최종 결과)
```


## 응용 
피보나치 수열을 재귀 호출을 이용해서 구현해보겠습니다.

```python
# n번째 피보나치 수열 찾기
# 입력: n값(0부터 시작)
# 출력: n번째 피보나치 수열 값

def fibo(n):
    if n <= 1:
        return n # n=0 ->0 | n=1 ->1
    return fibo(n-2) + fibo(n-1)

print(fibo(4))
```
실행 결과

```python
3
```
피보나치 수열을 재귀로 푸는 문제는 많이 복잡할 수 있습니다. 위의 코드처럼 4를 넣을 경우 우선 `fibo(n-2)`에서 탈출 조건에 맞는지 검사를 합니다. 탈출조건이 되려면 0또는 1이 되어야 하기 때문에 탈출조건에 맞지 않습니다. 그럼 `4-2=2`를 n으로 돌려주게 되고 2를 넣어서 다시 `fibo(n-2)`를 실행하게 됩니다. 이제는 탈출조건을 만족시킬 수 있습니다. 앞에서 n에 2를 넣어 넣어 주었기 때문에 2-2=0이므로 0으로 탈출하게 됩니다. 주의할 점은 여기서 끝니 아니라는 것 입니다. 2를 넣어서 계산하는 것을 뒤의 `fibo(n-1)`에도 동일하게 해주어야 합니다. 2-1=1로 탈출조건에 만족하기 때문에 1로 탈출하게 됩니다. 0+1로 탈출하게 됩니다. 여기서 또 주의해야 할 점은 우린 아직 왼쪽의 `fibo(n-2)`에만 4를 대입해서 풀었습니다. 오른쪽의 `fibo(n-1)`에도 4를 넣어 위와 같은 방식으로 풀어주어야 합니다. 그럼 마지막에는 `0+1+1+0+1`로 `fibo(4)`의 값은 3이 나오게 됩니다. 
<br>
<br>
재귀 호출이 적용된 피보나치는 매우 복잡하기 때문에 글로 설명을 하기가 매우 복잡합니다. 설명을 보더라도 이해하기도 매우 어렵습니다. 직접 풀어보면서 습득하는 방법이 가장 좋은 방법입니다.

#### 마치며
이번에는 재귀 호출을 이용하여 최대공약수를 구하는 방법을 알아보았습니다. 응용문제인 피보나치 수열을 구하는 방법은 직접 풀어봐야 이해할 수 있기 때문에 꼭 직접 손으로 풀어보시길 추천합니다. <br>
위에서 설명하는 내용은 `모두의 알고리즘 with python`이라는 책을 참고하고 있습니다. 책을 구매하시면 더 많은 내용과 설명이 있습니다.